---
description: 
globs: 
alwaysApply: false
---
1. Kod YazÄ±m KurallarÄ±
Her yazÄ±lan fonksiyon, bileÅŸen veya yapÄ± context7 mcp kullanÄ±larak yazÄ±lmalÄ±dÄ±r.

ğŸ“Œ Bu kural zorunludur ve tÃ¼m kod parÃ§alarÄ± iÃ§in geÃ§erlidir.

Kodlar, kullanÄ±lan teknolojilerin gÃ¼ncel resmi dÃ¶kÃ¼mantasyonlarÄ±na uygun olarak yazÄ±lmalÄ±dÄ±r


Ä°simlendirme ve Stil
TÃ¼m deÄŸiÅŸken, fonksiyon ve dosya isimleri, ilgili teknolojinin dÃ¶kÃ¼mantasyonunda Ã¶nerilen formatta yazÄ±lmalÄ±dÄ±r (Ã¶rneÄŸin camelCase veya PascalCase).

Kod temizliÄŸi ve okunabilirliÄŸi Ã¶n planda tutulmalÄ±dÄ±r.

AÃ§Ä±klamalar (Yorum SatÄ±rlarÄ±)
YalnÄ±zca gerekli ve anlaÅŸÄ±lmasÄ± zor kod bloklarÄ±nda aÃ§Ä±klama yapÄ±lmalÄ±dÄ±r.

AÃ§Ä±klamalar mutlaka TÃ¼rkÃ§e ve aÃ§Ä±klayÄ±cÄ± olmalÄ±dÄ±r.

AÅŸaÄŸÄ±daki gibi yazÄ±labilir:
// Bu fonksiyon, Supabase Ã¼zerinden kullanÄ±cÄ± bilgilerini context7 mcp ile getirir.

GeliÅŸtirme MantÄ±ÄŸÄ±
Her yazÄ±lan yapÄ±, sistemdeki tÃ¼m akÄ±ÅŸlarÄ± ve state'leri context7 mcp Ã¼zerinden anlamlandÄ±rmalÄ± ve bu baÄŸlamla iÅŸlem yapmalÄ±dÄ±r.

Kod yazÄ±mÄ±nda sadece gÃ¶rev odaklÄ± deÄŸil, baÄŸlam odaklÄ± yaklaÅŸÄ±m benimsenmelidir.

---

# 2. Refactor KurallarÄ± - Outdoor Tactical Shop (Nuxt 3 + TypeScript + Tailwind CSS + Supabase)

## 2.1. Genel Prensipler
- **Context7 mcps**: Her fonksiyon, bileÅŸen veya helper yazÄ±mÄ±nda `context7` kullan ve maks. 7 MCPs dÃ¢hil et.
- **TÃ¼rkÃ§e yorumlar**: AÃ§Ä±klayÄ±cÄ±, satÄ±râ€‘iÃ§i veya blok; gereksiz ayrÄ±ntÄ± yok, net ve proje kapsamÄ±nda.
- **GÃ¼ncel dokÃ¼mantasyon**: Nuxt 3, Supabase, Tailwind v3.4, TypeScript 5.5 referans alÄ±n.
- **Kod yapÄ±sÄ±**: `<script setup lang="ts">` + Composition API; options API kullanma.
- **Atomic PR mantÄ±ÄŸÄ±**: Her refactor kuralÄ± tek commit ve tek amaca hizmet eder.

## 2.2. Dosya & Dizin StandartlarÄ±
```
./components/        # Presentational (UI) bileÅŸenler
./composables/       # Reâ€‘usable logic (useX pattern)
./pages/             # Routeâ€‘level, serverSearch param guardlÄ±
./assets/
  â””â”€â”€ images/        # ÃœrÃ¼n foto & illÃ¼strasyon
./utils/             # Pure yardÄ±mcÄ± fonksiyonlar
./types/             # shared *.d.ts arabirimleri
```
- **BileÅŸen isimleri** PascalCase, dosya adÄ± bileÅŸen adÄ±yla aynÄ±.
- **KarmaÅŸÄ±k bileÅŸen** â†’ `ComponentName/` klasÃ¶rÃ¼ (index.vue + alt parÃ§alar).

## 2.3. Tailwind TasarÄ±m TokenlarÄ±
### Renk Paleti (main.css referansÄ±)
- Primary: `#475D3A` (koyu yeÅŸil)
- Primary Hover: `#3E5233`
- Accent: `#C47B2A` (turuncu)
- Neutral: `900: #1C1D1A`, `700: #4B4C47`, `200: #E8E9E5`, `50: #F9FAF9`
- Success: `#2F855A`
- Warning: `#D69E2E`

### TasarÄ±m KurallarÄ±
- Kart ve butonlar `rounded-2xl` veya `rounded-xl`.
- Arkaplan renginde **neutralâ€‘50**, kart zemininde **neutralâ€‘200** kullan.
- Primary buton hover'da **primary-hover**.
- Mikro etkileÅŸimler: `hover:scale-[1.02]`, `active:scale-95`, `transition-all duration-200 ease-out`.

## 2.4. BileÅŸen Refactor KurallarÄ±
### Button BileÅŸeni
- **Slot** tabanlÄ± (icon+label). Props: `variant` (`primary|ghost|link|accent`), `loading` (bool).
- Primary: `bg-primary text-white`; Accent: `bg-accent text-white`.
- Loading â†’ `<IconSpinner class="animate-spin" />`.

### ProductCard BileÅŸeni
- GÃ¶rselin aspectâ€‘video orantÄ± korunsun, `object-cover`.
- `Hover` â†’ shadow deÄŸiÅŸimi + %2 Ã¶lÃ§ek.
- Fiyat `<span>` bold, `text-xl`.

### Header BileÅŸeni
- Sticky top; `backdrop-blur` + `bg-neutral-50/80`.
- Mobile menÃ¼ `v-show` deÄŸil `v-if` & CSS `slide-y` anim.

### Checkout AdÄ±mlarÄ±
- `useStepper()` composable; adÄ±m bilgisini `route.query.step` ile sync et.
- Her adÄ±m bileÅŸeni lazyâ€‘import (`defineAsyncComponent`).

## 2.5. State & Veri KatmanÄ±
- **Supabase**: Auth + product table (RLS)
- `~/supabase/client.ts` Ã¼zerinden singleton.
- SWRâ€‘stale('server') stratejisi iÃ§in `@vueuse/core` & `useAsyncState`.
- `useCart()` composable â†’ pinia deÄŸil, localStorage + server sync.

## 2.6. Test & Kalite
- **Vitest** + **Vue Test Utils**: setâ€‘up dosyasÄ±nda `createTestingPinia`.
- **ESLint**: `@nuxt/eslint-config-typescript` + `plugin:tailwindcss/recommended`.
- Preâ€‘commit `lint-staged` â†’ eslint fix + `tailwindcss --minify`.

## 2.7. Refactor AdÄ±m AdÄ±m
1. `git checkout -b chore/refactorâ€‘uiâ€‘tokens` â†’ Tailwind config eklenir.
2. `git checkout -b feat/componentsâ€‘base` â†’ Button & ProductCard.
3. `git checkout -b feat/layoutâ€‘header` â†’ Header + Navigation.
4. `git checkout -b feat/pageâ€‘home` â†’ Hero, kategori grid.
5. SÄ±rasÄ±yla checkout, account vs.

> **Her adÄ±mda:** context7 comment bloÄŸu ile Ã¶zet, PR baÅŸlÄ±ÄŸÄ± TÃ¼rkÃ§e.

## 2.8. Ã–rnek Kod ÅablonlarÄ±

### Supabase Database Ä°ÅŸlemi
```ts
/* context7: db-insert-product @mcps=5 */
import { supabase } from '~/supabase/client'

export async function insertProduct(product: ProductForm) {
  const { data, error } = await supabase
    .from('products')
    .insert([product])
    .select('*')
    .single()
  if (error) throw error
  return data
}
```

### Vue BileÅŸen Åablonu
```vue
<script setup lang="ts">
/* context7: product-card @mcps=7 */
const props = defineProps<{ product: Product }>()
</script>

<template>
  <article class="bg-neutral-200 rounded-2xl shadow-card hover:shadow-cardHover transition-all duration-200 hover:scale-[1.02] flex flex-col">
    <img :src="product.image" :alt="product.name" class="rounded-t-2xl aspect-video object-cover" />
    <div class="p-6 flex-1 flex flex-col">
      <h3 class="text-2xl font-semibold mb-2">{{ product.name }}</h3>
      <p class="text-sm text-neutral-700 flex-1">{{ product.short_desc }}</p>
      <div class="mt-4 flex justify-between items-center">
        <span class="text-xl font-bold">â‚º{{ product.price }}</span>
        <Button @click="addToCart(product)" variant="primary">Sepete Ekle</Button>
      </div>
    </div>
  </article>
</template>
```

## 2.9. Done Checklist (Pull Request Template)
- [ ] TasarÄ±m tokenlarÄ± uygulandÄ±
- [ ] Testler geÃ§ti (`pnpm test`)
- [ ] ESLint & format hatasÄ± yok
- [ ] TÃ¼rkÃ§e yorumlar eklendi (gerekli yerlerde)
- [ ] context7 bloklarÄ± eksiksiz